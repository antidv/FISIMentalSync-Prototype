<!DOCTYPE html>
<html lang="es">

<head>
  <!-- Titulo -->
  <title>Mi perfil - [psicologo]</title>
  <link rel="icon" href="../FISIMentalSync-FrontEnd-MPA/images/logoFisi.ico" />
  <!-- Metadatos -->
  <meta charset="utf-8">
  <meta name="description" content="Perfil de psicologo" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- JS -->
  <script src="../js/analiticas.js"></script>
  <!-- CSS -->
  <link rel="stylesheet" href="../css/App.css" />
  <link rel="stylesheet" href="../css/barra-navegacion.css" />
  <link rel="stylesheet" href="../css/analiticas.css" />
  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <!-- Iconos -->
  <script src="https://kit.fontawesome.com/9e15f108bc.js" crossorigin="anonymous"></script>
 <!-- Google Chart -->
 <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

 <script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    fetch('http://localhost:3000/motivosConsultaMesEn/Software')
      .then(response => {
        if (response.ok) return response.json();
        throw new Error('Error en la solicitud de datos');
      })
      .then(data => {
        console.log(data); // Imprime los datos para verificar

        const dataTable = google.visualization.arrayToDataTable(data);

        var options = {
          title: 'Diagrama porcentual de motivos de consulta'
        };

        var chart = new google.visualization.PieChart(document.getElementById('patsoftpor'));
        chart.draw(dataTable, options);

        var optionsHist = {
          title: 'Histograma de motivos de consulta',
          curveType: 'function',
          legend: { position: 'bottom' }
        };

        var chartHist = new google.visualization.LineChart(document.getElementById('patsofthist'));
        chartHist.draw(dataTable, optionsHist);
      })
      .catch(error => console.error('Error:', error));
  }
</script>

  <script type="text/javascript">
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {

      var data = google.visualization.arrayToDataTable([
        ['Motivo de consulta ', 'Cantidad de alumnos'],
        ['Motivo de consulta 1',     11],
        ['Motivo de consulta 2',      2],
        ['Motivo de consulta 3',  2],
        ['Motivo de consulta 3', 2],
        ['Motivo de consulta 4',    7]
      ]);

      var options = {
        title: 'Diagrama porcentual'
      };

      var chart = new google.visualization.PieChart(document.getElementById('patsispor'));

      chart.draw(data, options);
    }
  </script>

<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    fetch('http://localhost:3000/motivosConsultaMes')
      .then(response => {
        if (response.ok) return response.json();
        throw new Error('Error en la solicitud de datos');
      })
      .then(data => {
        const dataTable = google.visualization.arrayToDataTable(data);

        var options = {
          title: 'Diagrama porcentual de motivos de consulta'
        };

        var optionsHist = {
          title: 'Histograma de motivos de consulta',
          curveType: 'function',
          legend: { position: 'bottom' }
        };

        var chart = new google.visualization.PieChart(document.getElementById('patmesfisipor'));
        chart.draw(dataTable, options);

        var chartHist = new google.visualization.LineChart(document.getElementById('patmesfisihist'));
        chartHist.draw(dataTable, optionsHist);
      })
      .catch(error => console.error('Error:', error));
  }
</script>

<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {

    var data = google.visualization.arrayToDataTable([
      ['Motivo de consulta ', 'Cantidad de alumnos'],
      ['Motivo de consulta 1',     11],
      ['Motivo de consulta 2',      2],
      ['Motivo de consulta 3',  2],
      ['Motivo de consulta 3', 2],
      ['Motivo de consulta 4',    7]
    ]);

    var options = {
      title: 'Diagrama porcentual'
    };

    var chart = new google.visualization.PieChart(document.getElementById('citmespor'));

    chart.draw(data, options);
  }
</script>

<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]);

    var options = {
      title: 'Histograma',
      curveType: 'function',
      legend: { position: 'bottom' }
    };

    var chart = new google.visualization.LineChart(document.getElementById('patsishist'));

    chart.draw(data, options);
  }
</script>

<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]);

    var options = {
      title: 'Histograma',
      curveType: 'function',
      legend: { position: 'bottom' }
    };

    var chart = new google.visualization.LineChart(document.getElementById('citmeshist'));

    chart.draw(data, options);
  }
</script>
</head>

<body>
  <div id="App">
    <main>
      <h1>Analíticas</h1>

      <div class="analytics">
        <div class="stat">
          <h4>Total estudiantes</h4>
          <div class="stat-number" id="cantAlumnos">9999</div>
        </div>
        <div class="stat">
          <h4>Citas atendidas</h4>
          <div class="stat-number" id="cantCitas">999</div>
        </div>
        <div class="stat">
          <h4>Satisfacción promedio</h4>
          <div class="stat-number" id="promedioGradoSatis">9</div>
        </div>
      </div>

      <div class="contenedor-cuadros">
        <div class="cuadro">
          <h2 class="titulo">Motivos de consulta en Software</h2>
          <div class="GoogleCharts">
            <div class="Ggraph" id="patsoftpor"></div>
            <div class="Ggraph" id="patsofthist"></div>
          </div>
        </div>
        <div class="cuadro">
          <h2 class="titulo">Motivos de consulta en Sistemas</h2>
          <div class="GoogleCharts">
            <div class="Ggraph" id="patsispor"></div>
            <div class="Ggraph" id="patsishist"></div>
          </div>
        </div>
        <div class="cuadro">
          <h2 class="titulo">Motivos de consulta por mes</h2>
          <div class="GoogleCharts">
            <div class="Ggraph" id="patmesfisipor"></div>
            <div class="Ggraph" id="patmesfisihist"></div>
          </div>
        </div>
        <div class="cuadro">
          <h2 class="titulo">Citas por mes</h2>
          <div class="GoogleCharts">
            <div class="Ggraph" id="citmespor"></div>
            <div class="Ggraph" id="citmeshist"></div>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script type="module" src="../js/App-psicologo.js"></script>
  <script language="JavaScript">
    document.addEventListener("DOMContentLoaded", function () {
      const perfilLi = document.querySelector('.contenedor-listas-nav li:nth-child(4)');
      perfilLi.classList.add('activo');
    });
  </script>
</body>

</html>